<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Object-Oriented Prog. - PythonLibs-Science</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Object-Oriented Prog.";
        var mkdocs_page_input_path = "basis-02-poo.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> PythonLibs-Science
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../..">< imt-mobisyst <</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Lecture intro.</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Basis</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../basis-01-system/">OS & language</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../basis-01-exo/">First exos</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Object-Oriented Prog.</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-object-oriented-programming-oop-in-python">1. Object-Oriented Programming (OOP) in Python</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1a-structuring-element-together">1.a. Structuring element together</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1b-class-instance">1.b. Class Instance</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#1c-methods">1.c. Methods</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-built-in-python">2. Built-in Python</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#2a-built-in-class">2.a. Built-in Class</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2b-good-practices">2.b. Good practices.</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2c-operators">2.c. Operators.</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-lets-play">3. Let's Play</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#3a-read-a-mp3-sound">3.a Read a Mp3 sound</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3b-accessor">3.b Accessor</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3c-some-commands">3.c Some commands</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Good practice</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-02-tools/">Develloper tools</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-01-pack/">Packaging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev-03-integ/">Integration</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">PythonLibs-Science</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Basis</li>
      <li class="breadcrumb-item active">Object-Oriented Prog.</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="object-oriented-programming">Object-Oriented Programming</h1>
<p>This tutorial revisits <em>OOP</em> concepts, by presenting them in Python. 
In a second part, an exercise is proposed to create a toolbox for <em>MP3</em> collection management.</p>
<p>All the proposed pieces of code should be tested in a <code>script.py</code>.</p>
<h2 id="1-object-oriented-programming-oop-in-python">1. Object-Oriented Programming (OOP) in Python</h2>
<p>Playing with class, and the main concepts of OOP in <em>Python</em>.</p>
<h3 id="1a-structuring-element-together">1.a. Structuring element together</h3>
<p>First a <strong>class</strong> can be reduced to a collection of class attributes and functions.</p>
<pre><code class="language-python"># Definition:
class MyObjectType :
    world= &quot;world&quot;

    def function1() :
        return &quot;hello&quot;

    def function2() :
        return MyObjectType.world

# Use:
hello= MyObjectType.function1()
print( hello + ' ' + MyObjectType.function2() )
</code></pre>
<p>To notice the indentations that state what is inside a class with a new level of indentation for instructions of the class's function.
In this example, <em>MyObjectType</em> is a class with one attribute (<em>world</em>) and two functions (<em>function1()</em>, <em>function2()</em>).</p>
<h3 id="1b-class-instance">1.b. Class Instance</h3>
<p>The main feature of <strong>class</strong> is the capacity to instantiate objects (<em>class instances</em>).
An instance of a class is an object defined as a specific type.
It is possible to associate attributes with an instance.
In this case, instance-attribute values can be different for different instances of the same class (by opposition to class-attributes).</p>
<pre><code class="language-python"># Definition:
class MyObjectType :
    class_word= &quot;hello&quot;     # A class attribute

# Use:
anInstance= MyObjectType()          # Instanciate a MyObjectType object

anInstance.instance_word= &quot;world&quot;   # an instance attribute

aSecondInstance= MyObjectType()
aSecondInstance.instance_word= &quot;nobody&quot;

assert( type(anInstance) is MyObjectType )
print( anInstance.class_word + ' ' + anInstance.instance_word )
</code></pre>
<p>At this point, <code>anInstance.class_word</code> is <code>MyObjectType.class_word</code>,
and for no confusion, you should use <code>MyObjectType.class_word</code> to manipulate this attribut.</p>
<p>Another good way to manipulate a class attribute: <code>type(anInstance).classAttribut</code>.
Typically, nasty manipulation of class-attributes can transform them into instance attributes for specific instances that generate failure, difficult to debug...
As in this example :</p>
<pre><code class="language-python"># Definition:
class MyObjectType :
    classAttribut= &quot;Void&quot;

# Use:
anInstance= MyObjectType()

MyObjectType.classAttribut= &quot;Hello&quot;
print( anInstance.classAttribut )

anInstance.classAttribut= &quot;World&quot;     # I should not do that...
print( MyObjectType.classAttribut )

MyObjectType.classAttribut= &quot;Hmmm&quot;
print( anInstance.classAttribut + &quot; - &quot; + MyObjectType.classAttribut )
</code></pre>
<h3 id="1c-methods">1.c. Methods</h3>
<p>The strength of <em>OOP</em> relies on the instances that define a context for the executions of functions associated to the class.
A function associated to an instance is named a <strong>METHOD</strong>.
In <em>Python</em>, a method is a class function where the instance is explicit as the first parameter.
A convention supposes that this instance is named <em>self</em>.</p>
<pre><code class="language-python"># Definition:
class MyObjectType :
    def method(self) :
        return 42

# Use:
anInstance= MyObjectType() # Instanciate a MyObjectType

v1= anInstance.method()
v2= MyObjectType.method(anInstance)

if v1 == v2 :
    print( &quot;Hello World&quot; )

print( f&quot;{MyObjectType.method}\nvs {anInstance.method}&quot;)
</code></pre>
<p>As in this example, in <em>Python</em> a method can be called directly on an instance (<em>v1</em>) or as a class function (<em>v2</em>).
In the first case, the method is bound to an instance :</p>
<pre><code class="language-python"># Definition:
class MyObjectType :
    def method(self) :
        return 42

anInstance= MyObjectType()

print( f&quot;{MyObjectType.method}\nvs\n{anInstance.method} ({anInstance})&quot;)
</code></pre>
<p>As a result, in <em>Python</em>, a method with <span class="arithmatex">\(3\)</span> arguments is defined by a function of <span class="arithmatex">\(4\)</span> arguments.</p>
<pre><code class="language-python">    def aMethod(self, argument1, argument2, argument3) :
        pass
</code></pre>
<hr />
<h2 id="2-built-in-python">2. Built-in Python</h2>
<p><em>Python</em> defines numerous tools natively. 
Many of those tools rely on functions/methods associated with types.
There are named <a href="https://docs.python.org/3/library/functions.html">built-in functions</a>.
Those functions can be redefined (overridden) to attach a specific behavior to developer types (classes).</p>
<h3 id="2a-built-in-class">2.a. Built-in Class</h3>
<p>First of them are the <strong>built-in functions</strong> defined in <em>Python</em> objects:</p>
<ul>
<li><code>__init__(self)</code> : Instance initialization, called at instance construction.</li>
<li><code>__del__(self)</code>  : Instance destruction, called when a instance is deleted.</li>
<li><code>__str__(self)</code>  : Transform an instance in a string</li>
</ul>
<pre><code class="language-python"># Definition:
class MyObjectType :

    def __init__(self):
        print('Initialization')

    def __del__(self): 
        print('Destruction')

    def __str__(self):
        return &quot;&gt; MyObjectType::instance &lt;&quot;

# Use:
anInstance= MyObjectType()
print( anInstance )
</code></pre>
<p>To notice that it is possible to change the number of parameters in <code>__init__</code> to generate a constructor over parameters.
In general, all the instance attributes are created in the <code>__init__</code> method. But it is not mandatory (in fact, in Python, the number and definition of instance attributes are dynamic). 
It is also possible to call the parent method when overriding with <a href="https://docs.python.org/3/library/functions.html#super"><code>super</code></a>.</p>
<pre><code class="language-python"># Definition:
class MyObjectType :

    def __init__(self):
        print('Initialization')

    def __del__(self): 
        print('Destruction')

    def __str__(self):
        return &quot;&gt; MyObjectType::instance &lt;&quot;

# Definition:
class ObjectSpecific(MyObjectType) :

    def __init__(self, aNumber):
        super(MyObjectType, self)._init__(self)
        self._aNumber= aNumber

    def __str__(self):
        return f&quot;&gt; MyObjectType::instance-{self._aNumber} &lt;&quot;

# Use:
anInstance= MyObjectType(42)
print( anInstance )
</code></pre>
<h3 id="2b-good-practices">2.b.  Good practices.</h3>
<p>As we already see, several rules are more good practices than language constraints. </p>
<ul>
<li>The current instance, context for a method execution, is always named <em>self</em>.</li>
<li><code>__init__</code> method (if defined) is your first method.</li>
<li>Initialize your instance attributes into the <code>__init__</code> method.</li>
<li>Attribute names start with <code>_</code>. </li>
<li>Class names start with an Uppercase letter.</li>
<li>etc.</li>
</ul>
<p>Most of those conventions are presented in the <a href="https://peps.python.org/pep-0008/">style guide for Python code</a></p>
<h3 id="2c-operators">2.c.  Operators.</h3>
<p>Finally, most of the operator can be redefined based on built-in function.
For a complete list with other type built-in functions, see <a href="https://docs.python.org/3/library/stdtypes.html">docs.python.org</a></p>
<p>An example with the addition:</p>
<pre><code class="language-python">class Vector :

    def __init__(self, x, y):
        self._x= x
        self._y= y

    def __add__(self, another):
        return Vector( self._x+another._x, self._y+another._y )

    def __str__(self):
        return f&quot;({self._x}, {self._y})&quot;

# Use:
a= Vector( 10.7, 8.0 )
b= Vector( -2.1, 34.0 )
print( f&quot;{a} + {b} = {a+b}&quot; )
</code></pre>
<hr />
<h2 id="3-lets-play">3. Let's Play</h2>
<p>We  now have an idea of what <em>OOP</em> is capable of in <em>Python</em>. 
The exercise here is to put those notions in music.</p>
<h3 id="3a-read-a-mp3-sound">3.a Read a Mp3 sound</h3>
<p>As a first exercie we want a class representing a song. 
First, an exploration on internet showed us the librairie: <a href="https://pypi.org/project/playsound3">playsound3</a> allowing us for play <em>mp3</em> music.</p>
<p>This example loads a music song and play it :</p>
<pre><code class="language-python">import time 
from playsound3 import playsound

# You can play sounds in the background
sound = playsound(&quot;./song.mp3&quot;, block=False)

# and check if they are still playing
if sound.is_alive() :
    print(&quot;Sound is playing!&quot;)
    time.sleep( 5.0 )

# and stop them whenever you like.
sound.stop()
</code></pre>
<p>So as a first result, we aim to have a class (<em>Song</em> for instance) with methods to load a music file and to play it.</p>
<p>Something like this: </p>
<pre><code class="language-python">class song :
   # To implement ... 

asong= Song()
asong.load(&quot;./song.mp3&quot;)
aSound.play()
</code></pre>
<h3 id="3b-accessor">3.b Accessor</h3>
<p>Our <em>Song</em> class defines a few attributes for an instance: a title, an artist name, an album name, and the number of tracks in the album. First, we want a constructor that defines all of these attributes. Then we ask for an accessor method for each of these attributes.</p>
<pre><code class="language-python">class song :
   # To implement ... 

asong= Song(&quot;Rodriguez&quot;, &quot;Can't Get Away&quot;, &quot;Searching for Sugar Man&quot;,  7 )
asong.load(&quot;./song.mp3&quot;)
print( f&quot;{asong.artist()} - {asong.album()} {asong.track()} - {asong.title()}&quot; )
asound.play()
</code></pre>
<p>In fact, we will prefer to get metadata from the file directly when loading it.
To do that we can count on <a href="https://pypi.org/project/eyeD3">eyeD3</a> <em>Python</em> library (<a href="https://eyed3.readthedocs.io/en/latest">documentation</a>).</p>
<p>Here's a piece of code to help in this mission: </p>
<pre><code class="language-python">import eyed3

audiofile = eyed3.load(&quot;song.mp3&quot;)
print( audiofile.tag.artist )
print( audiofile.tag.album )
print( audiofile.tag.album_artist )
print( audiofile.tag.title )
print( audiofile.tag.track_num.count)
</code></pre>
<p>It is also possible to define default parameter values in the <code>__init__</code> method to be capable of instantiating a new song without metadata.
To learn how to do that, let's go on internet.
For instance, the [w3schools]( is an excellent entrance point regarding web technologies and presents, among others, the notion of <a href="https://www.w3schools.com/python/gloss_python_function_default_parameter.asp">function default parameter</a>, with a sandbox...</p>
<h3 id="3c-some-commands">3.c Some commands</h3>
<p>You should now have a first skeleton of the application we want to create.
However, in fact, the goal is to create several commands. So the best way to do that in a first move, is to create several <em>Python</em> files. A first <em>Python</em> file will implement our <em>Song</em> class with all the required functionality as methods of the class. Then we add a <em>Python</em> file for each command we want to implement. </p>
<p>In your directory you should have :</p>
<pre><code class="language-sh">songpkg.py   # With the Song class
command1.py
command2.py
command3.py
...
</code></pre>
<p>The command script should be as small as possible.
All the important code is in <code>songpkg.py</code>, and imported in your command file.</p>
<p>For instance, the <code>play.py</code> command will look like </p>
<pre><code class="language-python">import songpkg

asong= songpkg.Song()
asong.load(&quot;./song.mp3&quot;)
print( f&quot;{asong.artist()} - {asong.album()} {asong.track()} - {asong.title()}&quot; )
asound.play()
</code></pre>
<p>The expected command: </p>
<ul>
<li><code>play.py</code> : Takes a file name of a song as an argument and print the metadata of that song  before playing the song.</li>
<li><code>set.py</code> : Takes a file name of a song and all metadata as command arguments and save the file with those metadata.</li>
<li><code>playlist.py</code> : Takes a playlist as an argument (a text file, with a list of MP3 files to play) and plays it.</li>
<li><code>search.py</code> : Takes an artist name, a search all the local MP3 files matching that artist.</li>
<li><code>rename.py</code> :  search all MP3 recursively in a directory, and rename them as <code>artist - album track - title.mp3</code>.</li>
</ul>
<p>To do that, you will certainly requires <em>os</em> <em>Python</em> modul (again on <a href="https://www.w3schools.com/python/module_os.asp">w3schools</a>) and more specifically, the <code>os.listdir()</code> returning a list of the names of the entries in a directory.</p>
<!---

## OOP in Python: default argument values


Example:


<pre><code class="language-python">def aFunction() :
    anInstance= MyClass()      # call anInstance.__init__()
    print( anInstance )        # call anInstance.__str__()
    return True                # garbage call to anInsatnce.__del__()
</code></pre>


---

## Object-Oriented Programing in Python

<br />

**Constructor**: `__init__` : initialize a new instance with potentially $n$ arguments


<pre><code class="language-python">class MyClass() :
    def __init__ ( self, arg1, arg2 ) :
        self._attribut1= param1
        self._attribut2= function( param1, param2 )

anInstance= MyClass( &quot;Paul&quot;, &quot;Mouaddib&quot; )
</code></pre>


<br />

In Python `__init__` method is unique (as all other methods)
(i.e. no overloading)


## Object-Oriented Programing in Python

Function with a variable number of arguments  - **Example:**


<pre><code>function(1, 2)
function(1, 2, 3, 4)
</code></pre>


**Definition:** parameters with default values


<pre><code class="language-python">def aFuncrion ( val1=1, val2=0, val3=0, val4=1 ) :
    return (val1+ val1+ val1) * val4
</code></pre>


**Alternative Run:**


<pre><code>function( val4=8 )
</code></pre>



--- 

## Object-Oriented Programing in Python


**Good Practices:**

- Use `self`.
- Prefer instance method (at least `self` argument).
- Name your attributes starting with `_`.
- Never access class attributes from instances directly.
(Better `Class._att` or `type(instance)._att` than `instance._att`).
- ...




---
<!-- --------------------------------------------------------------- - ->

## Create a class to manipulate Point Cloud

<br />
<br />

- **Initialize your working space**
- Define **instance attributes**
- Propose some **initialization**
- Provide **accessors**
- Customize **built-in methods**
- Develope some **usefull methods**
- ...


---
<!-- --------------------------------------------------------------- - ->

## Create a class to manipulate Point Cloud

- **Initialize your working space** - two files in a same directory: 
    - `myCloud.py` with _class definition_.
    - `test_myCloud.py` a _test script_ with instanciation and call to methods.

</br >

<div class="line">
<div class="one2">

`myCloud.py`:


<pre><code class="language-python">class Cloud :
    pass
</code></pre>


</div>
<div class="one2">

`test_myCloud.py`:


<pre><code class="language-python">import myCloud as mc

aCloud= mc.Cloud()
assert( type(aCloud) == mc.Cloud )
</code></pre>


</div>
</div>

Then execute: `python3 test_myCloud.py`

---
<!-- --------------------------------------------------------------- - ->

## Cloud :: Construction and Accessors.

- As a first functionality the possibility of _adding_ and _access_ points.

The `test_cloud.py` will be:


<pre><code class="language-python">import myCloud as mc

aCloud= mc.Cloud()
assert( aCloud.size() == 0 )
assert( aCloud.points() == [] )

aCloud.append( 3, 8 )
assert( aCloud.size() == 1 )
assert( aCloud.points() == [(3,8)] )
assert( aCloud.point(0) == (3,8) )

...
</code></pre>


---
<!-- --------------------------------------------------------------- - ->

## Cloud :: More usefull elements

- **Random generator** - generate randomly a point cloud of $n$ points.
- **Print function** - overdefine `__str__` in an informative, not too long way.
    - Exemple: `print( aCloud )  > [(12.8, 8.5), (7.8, 0.5), ...](100)`

---
<!-- --------------------------------------------------------------- - ->

## Create a class to manipulate Point Cloud

<br />
<br />

- **More Accessors:**
    - *listX():* return a list of the *x* values of all points (**&** *listY():* reciprocally)
- **Computation:** - *average():*, *standardDeviation()*, *minXPoint():*, ...
- ... 

<br />



-->
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../basis-01-exo/" class="btn btn-neutral float-left" title="First exos"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../dev-02-tools/" class="btn btn-neutral float-right" title="Develloper tools">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../basis-01-exo/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../dev-02-tools/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../javascripts/mathjax.js"></script>
      <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
