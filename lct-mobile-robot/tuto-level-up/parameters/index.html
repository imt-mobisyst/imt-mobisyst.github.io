<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Parameters - Lct. Mobile-Robot</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Parameters";
        var mkdocs_page_input_path = "tuto-level-up/parameters.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Lct. Mobile-Robot
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../../..">MobiSyst <</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Intro</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Kick-off</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/basics/">OS and Shell</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/first-contact/">Nodes and Topics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/package/">ROS Package</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/move/">Move the Robot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/simulation/">Simulation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Level-up</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../range-sensor/">Range Sensor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reactive/">Reactive Move</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Parameters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../camera-driver/">Camera Driver</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../vision/">Vision</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mastering</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-mastering/slam/">S.L.A.M</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-mastering/vision/">Image processing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-mastering/transform/">Move To</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Challenge</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../challenge/kick-off/">Kick-off</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../challenge/challenge-1on2/">Challenge 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../challenge/challenge-2on2/">Challenge 2</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../challenge/d-day/">Demo-Day</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendix</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../appendix/installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../appendix/faq/">F.A.Q</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../pdf/"></a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Lct. Mobile-Robot</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Level-up</li>
      <li class="breadcrumb-item active">Parameters</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="handle-ros-parameters">Handle ROS parameters</h1>
<p>Node piece of programs accepts the argument to be parametrized, speed, name of the topic, frequencies or whatever.
This tutorial visits how ROS2 handle parameters...
But first, let see how to read <code>Python3</code> script arguments. </p>
<h2 id="python3-arguments">Python3 arguments</h2>
<p>It is very common to add arguments in the command line while starting a program or a script.
Most of the Linux commands accept arguments. </p>
<p>In python, the arguments can be read with the <code>sys</code> python package, on a <code>argv</code> list (argument values).</p>
<p>lets initialize a <code>test-script.py</code></p>
<pre><code class="language-python">import sys

print( sys.argv )
</code></pre>
<p>and try: </p>
<pre><code class="language-sh">python3 test-script.py -r salut nounou 42
</code></pre>
<p>You notice that the executed script itself is the first argument (at indice <span class="arithmatex">\(0\)</span>).</p>
<h2 id="use-ros2-parameters">Use ROS2 Parameters</h2>
<p><em>ROS2</em> provides parameter management on top of command arguments.
Typically, it is possible to list the parameters with <code>ros2 param list</code> command.
Start a turtlesim in a terminal an search for trutlesim parameters in another.</p>
<p>To activate parameters (and topic remapping) <code>ros2 run</code> command needs <code>--ros-args</code> attributes, <br />
then the syntax is <code>-p parameter_name:=value</code>.</p>
<p>For instance, to set a beautiful orange on the turtlesim background: </p>
<pre><code class="language-sh">ros2 run turtlesim turtlesim_node --ros-args \
    -p background_r:=100 \
    -p background_g:=60 \
    -p background_b:=0
</code></pre>
<p>In <em>YAML</em> launch file parameters should be defined on a <code>param</code> list. </p>
<pre><code class="language-yaml">launch:
- node: 
    pkg: turtlesim
    exec: turtlesim_node
    name: orange_simu
    param:
    - { name: &quot;background_r&quot;, value: 100 }
    - { name: &quot;background_g&quot;, value: 60 }
    - { name: &quot;background_b&quot;, value: 0 }
</code></pre>
<!--
Furthermore it is also possible to define arguments in the _YAML_ launch file.


<pre><code class="language-yaml">launch:

- arg:
    name: &quot;world&quot;
    default: &quot;$(find-pkg-share basic_node)/world/basic.world&quot;

- node: 
    pkg: stage_ros2
    exec: stage_ros2
    name: stage
    param:
    - { name: &quot;use_static_transformations&quot;, value: true }
    -
      name: &quot;world_file&quot;
      value: &quot;$(var world)&quot;
</code></pre>

-->

<h2 id="python3-integration">Python3 Integration</h2>
<p>The ROS2 client API (Python3 as C++) provides tools to declare and read <em>ROS2</em> parameters value.</p>
<ul>
<li><code>declare_parameter</code> method attached to a <code>Node</code> instance, declare a ROS variable.
On a simple usage, it takes 2 parameters:<ul>
<li>The variable name to use.</li>
<li>A default value <strong>(ATTENTION, ROS parameter has type, so <span class="arithmatex">\(10\)</span> is different of <span class="arithmatex">\(10.0\)</span>)</strong></li>
</ul>
</li>
<li><code>get_parameter( 'variable_name' )</code> returning a parameter instance, with <code>aParameter.value</code> the value.</li>
</ul>
<p>(To notice that a <code>aParameter.get_parameter_value()</code> exists and returns an object containing the parameter value on diferent possible types: 
<code>[bool_value, integer_value, double_value, string_value, byte_array_value, bool_array_value, integer_array_value, double_array_value, string_array_value]</code>)</p>
<p>For instance, a node initialization with an integer parameters lookalike:</p>
<pre><code class="language-python"># Initialize ROS node with ROS client
rclpy.init()
rosNode= Node( &quot;myOneParameterNode&quot; )

# Node Parameters : 
rosNode.declare_parameter( 'my_parameter', 10 )
aProgramVariable= rosNode.get_parameter( 'my_parameter' ).value

print( f&quot;&gt; Parameter value: {aProgramVariable}&quot; )

# Start infinite loop
rclpy.spin(rosNode)

# Clean everything and switch the light off
rosNode.destroy_node()
rclpy.shutdown()
</code></pre>
<p>Add this node to your <em>tutorial_pkg</em> and test it.</p>
<pre><code class="language-sh"># Shell-1
ros2 run tutorial_pkg oneParamNode

# Shell-2
ros2 param list

# Shell-1
ros2 run tutorial_pkg oneParamNode --ros-args -p my_parameter:=42

# Shell-1
ros2 run tutorial_pkg oneParamNode --ros-args -p my_parameter:=&quot;42&quot;

# Shell-1
ros2 run tutorial_pkg oneParamNode --ros-args -p my_parameter:=&quot;quarante-deux&quot;
</code></pre>
<p>Implements ROS parameters to set-up the message to be sent by your talker node (cf. <em>Node and Topic</em> tutorial).
Ideally, the node parameter is read each times, before to publish the message to guaranty to sent the last message in case of parameter modification.</p>
<pre><code class="language-sh"># With Node: 'myTalker' and parameter 'message'
ros2 param set myTalker message &quot;New important information to broadcast...&quot;
</code></pre>
<!--
Optionally, it is possible to process _on-the-go_ parameter modification by defining callback function triggered on a parameter event. For more detail, see the official documentation:
- https://docs.ros.org/en/iron/Concepts/Basic/About-Parameters.html
-->
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../reactive/" class="btn btn-neutral float-left" title="Reactive Move"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../camera-driver/" class="btn btn-neutral float-right" title="Camera Driver">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../reactive/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../camera-driver/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../javascripts/mathjax.js"></script>
      <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
