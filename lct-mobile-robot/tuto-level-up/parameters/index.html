<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Parameters - Lct. Mobile-Robot</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Parameters";
        var mkdocs_page_input_path = "tuto-level-up/parameters.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Lct. Mobile-Robot
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../../..">MobiSyst <</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Intro</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Kick-off</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/basics/">OS and Shell</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/first-contact/">Nodes and Topics</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/package/">ROS Package</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/move/">Move the Robot</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-kick-off/simulation/">Simulation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Level-up</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../range-sensor/">Range Sensor</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../reactive/">Reactive Move</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Parameters</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../camera-driver/">Camera Driver</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Mastering</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-mastering/interfaces/">Interfaces</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-mastering/slam/">S.L.A.M</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-mastering/transform/">Move To</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../tuto-mastering/vision/">Vision</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Challenge</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../challenge/kick-off/">Kick-off</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../challenge/challenge-1on2/">Challenge 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../challenge/challenge-2on2/">Challenge 2</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Appendix</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../appendix/installation/">Installation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../appendix/faq/">F.A.Q</a>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../pdf/"></a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Lct. Mobile-Robot</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Level-up</li>
      <li class="breadcrumb-item active">Parameters</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="handle-ros-parameters">Handle ROS parameters</h1>
<p>Node piece of programme accepts argument to be parrametrized, speed, name of the topic, frequencies or what ever.
This tutorial visits how ROS2 handle parameters...
But first let see how to read <code>Python3</code> script argements. </p>
<h2 id="python3-arguments">Python3 arguments</h2>
<p>Its is very commun add arguments in the command line while starting a programme or a script.
Most of the linux commands accepts arguments. </p>
<p>In python, the arguments can be read with the <code>sys</code> python package, on a <code>argv</code> list (argument values).</p>
<p>lets initialize a <code>test-script.py</code></p>
<pre><code class="language-python">import sys

print( sys.argv )
</code></pre>
<p>and try: </p>
<pre><code class="language-sh">python3 test-script.py -r salut nounou 42
</code></pre>
<p>You notice that the executed script itself is the first argument (at indice <span class="arithmatex">\(0\)</span>).</p>
<h2 id="use-ros2-parameters">Use ROS2 Parameters</h2>
<p><em>ROS2</em> provides parameter managment on top of command arguments.
Typically, it is possiple to list the parameters with <code>ros2 param list</code> command.
Start a turtlesim in a terminal an search for trutlesim parameters in another.</p>
<p>To activate parameters (and topic remaping) <code>ros2 run</code> command needs <code>--ros-args</code> attributs, <br />
then the syntaxe is <code>-p parameter:=value</code>.</p>
<p>For instance to set a beautifull orange at turtlesim background: </p>
<pre><code class="language-sh">ros2 run turtlesim turtlesim_node --ros-args \
    -p background_r:=100 \
    -p background_g:=60 \
    -p background_b:=0
</code></pre>
<p>In <em>YAML</em> launch file parameters should be defined on a <code>param</code> list. </p>
<pre><code class="language-yaml">launch:
- node: 
    pkg: turtlesim
    exec: turtlesim_node
    name: orange_simu
    param:
    - { name: &quot;background_r&quot;, value: 100 }
    - { name: &quot;background_g&quot;, value: 60 }
    - { name: &quot;background_b&quot;, value: 0 }
</code></pre>
<!-- Furthermore it is also possible to define argument to the _YAML_ launch file.


<pre><code class="language-yaml">launch:

- arg:
    name: &quot;world&quot;
    default: &quot;$(find-pkg-share basic_node)/world/basic.world&quot;

- node: 
    pkg: stage_ros2
    exec: stage_ros2
    name: stage
    param:
    - { name: &quot;use_static_transformations&quot;, value: true }
    -
      name: &quot;world_file&quot;
      value: &quot;$(var world)&quot;
</code></pre>

-->

<h2 id="simple-python3-integration">Simple Python3 Integration</h2>
<p>Thes ROS2 client API (Python3 or C++) provides tools to d√©clare and read <em>ROS2</em> parameters value.
However, one of the simple way to use parameters
is to allow the <em>ROS</em> node to administrate them automatically.
It requires to set the node attributs <code>allow_undeclared_parameters</code> and <code>automatically_declare_parameters_from_overrides</code> at <em>True</em>.</p>
<pre><code class="language-python">    myNode= Node(
        'my_node_name',
        allow_undeclared_parameters=True,
        automatically_declare_parameters_from_overrides=True
    )
</code></pre>
<p>This way, the node will create (if necessary) and handle <em>ROS</em> parameters each time developers try to get value from them.
The methode <code>Node::get_parameter_or</code> permits to read a parameters of a given type or return a default value if the parameter is not provided.
<code>get_parameter_or</code> takes <span class="arithmatex">\(2\)</span> attributes: <code>parameter_name</code> used in the <code>ros2 run</code> command or in the launch files, <code>defaultParameter</code> a <em>Parameter</em> instance defined with a <code>name</code>, a <code>type</code> and a <code>default value</code>.
To notice tha the <code>parameter_name</code> and the <code>Parameter instance.name</code> can be the same or diferent.
The Parameter type can be : <code>NOT_SET, BOOL, INTEGER, DOUBLE, STRING, BYTE_ARRAY, BOOL_ARRAY, INTEGER_ARRAY, DOUBLE_ARRAY or STRING_ARRAY</code> (cf. <a href="https://github.com/ros2/rclpy/blob/rolling/rclpy/rclpy/parameter.py">Parameter Class</a>)</p>
<p>for instance: </p>
<pre><code class="language-python">def initializeAttributsFromROSParameters( self, aROSNode ):
    self._aTopicName = aROSNode.get_parameter_or( 'topic_to_use',
        rclpy.Parameter('aTopic', rclpy.Parameter.Type.STRING, 'topic')
    )
    self._aId = self.get_parameter_or( 'id',
        Parameter('id', Parameter.Type.INTEGER, 8)
    )
    self._aVector  = self.get_parameter_or( 'vector',
        Parameter('floatList', Parameter.Type.DOUBLE_ARRAY, [1.1, 2.2])
    )
</code></pre>
<p>Implements ROS parameters to set-up different messages to your talker node (cf. <em>Node and Topic</em> tutorial).</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../reactive/" class="btn btn-neutral float-left" title="Reactive Move"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../camera-driver/" class="btn btn-neutral float-right" title="Camera Driver">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../reactive/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../camera-driver/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../javascripts/mathjax.js"></script>
      <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
